<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Journey to Heart Village: Welcome Kit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;500;700;900&family=Noto+Sans+KR:wght@300;400;500;700&family=Cinzel:wght@400;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'hb-dark': '#0a0f0d',
                        'hb-green': '#132616',
                        'hb-gold': '#d4af37',
                        'hb-cream': '#fdfbf7',
                        'lovely-pink': '#ffe4e1',
                        'book-brown': '#4a3b2a',
                    },
                    fontFamily: {
                        serif: ['"Noto Serif KR"', 'serif'],
                        sans: ['"Noto Sans KR"', 'sans-serif'],
                        eng: ['"Cinzel"', 'serif'],
                        hand: ['"Great Vibes"', 'cursive'],
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-slow': 'pulse 3s infinite',
                        'fade-in': 'fadeIn 1s ease-out forwards',
                        'fade-in-slow': 'fadeIn 2s ease-out forwards',
                        'slide-up': 'slideUp 0.8s ease-out forwards',
                        'bounce-right': 'bounceRight 1s infinite',
                        'book-open': 'bookOpen 1.5s forwards',
                        'shimmer': 'shimmer 2.5s infinite',
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUp: { '0%': { transform: 'translateY(20px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
                        bounceRight: { '0%, 100%': { transform: 'translateX(0)' }, '50%': { transform: 'translateX(5px)' } },
                        bookOpen: { '0%': { transform: 'rotateY(0deg)' }, '100%': { transform: 'rotateY(-180deg)' } },
                        shimmer: { '0%': { backgroundPosition: '-200% center' }, '100%': { backgroundPosition: '200% center' } }
                    },
                    backgroundImage: {
                        'gold-gradient': 'linear-gradient(to right, #8a6e30, #e6cf8b, #8a6e30)',
                    }
                }
            }
        }
    </script>
    <style>
        body { overflow: hidden; height: 100vh; width: 100vw; background: black; transition: background-color 1s ease; touch-action: manipulation; }
        
        /* Scene Management */
        .scene { 
            position: absolute; inset: 0; 
            display: none; flex-direction: column; 
            align-items: center; justify-content: center;
            transition: opacity 1s ease; opacity: 0; 
            width: 100%; height: 100%; 
            overflow-y: auto; padding-bottom: 100px;
        }
        .scene.active { display: flex; opacity: 1; z-index: 10; }
        
        /* Story Book Styles */
        .book-container { perspective: 1500px; width: 280px; height: 400px; cursor: pointer; position: relative; }
        .book { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform 1s; }
        .book-cover {
            position: absolute; width: 100%; height: 100%; background: #4a3b2a;
            border-radius: 4px 12px 12px 4px; box-shadow: 10px 10px 30px rgba(0,0,0,0.8);
            display: flex; flex-col; align-items: center; justify-content: center;
            border: 2px solid #d4af37; backface-visibility: hidden; z-index: 20;
            background-image: url('https://www.transparenttextures.com/patterns/leather.png');
        }
        .book-spine { position: absolute; left: 0; top: 0; bottom: 0; width: 20px; background: #3e3020; transform: rotateY(-90deg) translateX(-10px); }
        
        /* Dark Theme Elements */
        .toxic-river { position: absolute; bottom: 0; width: 100%; height: 40%; background: linear-gradient(to top, #1a0505, transparent); opacity: 0.8; z-index: 0; pointer-events: none; }
        .villain-card {
            background: rgba(20, 10, 10, 0.9); border: 1px solid rgba(220, 38, 38, 0.4);
            backdrop-filter: blur(5px); padding: 15px; border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8); text-align: center; width: 100%; position: relative; z-index: 20;
        }

        /* Lovely Theme Elements */
        .lovely-bg { background: radial-gradient(circle at top right, #fff0f0, #fdfbf7); }
        .gold-border-card {
            background: rgba(255, 255, 255, 0.9); border: 2px solid #d4af37;
            box-shadow: 0 10px 40px rgba(212, 175, 55, 0.2); backdrop-filter: blur(10px);
        }
        
        /* Transition Overlay */
        #light-overlay { position: fixed; inset: 0; background: white; z-index: 100; pointer-events: none; opacity: 0; transition: opacity 1s; }

        /* Custom Scroll */
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #d4af37; border-radius: 2px; }
        
        /* Modal */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; display: none; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s; }
        .modal-overlay.open { display: flex; opacity: 1; }

        /* Sticky Bottom Button */
        .bottom-action { position: fixed; bottom: 30px; left: 0; width: 100%; padding: 0 24px; z-index: 50; display: flex; justify-content: center; }
        
        /* Sparkles */
        .sparkle { position: absolute; width: 4px; height: 4px; background: #d4af37; border-radius: 50%; animation: twinkle 2s infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0; transform: scale(0); } 50% { opacity: 1; transform: scale(1); } }
        
        /* Text Shimmer */
        .text-shimmer {
            background: linear-gradient(to right, #8a6e30, #f3e5ab, #8a6e30);
            -webkit-background-clip: text; color: transparent;
            background-size: 200% auto; animation: shimmer 3s linear infinite;
        }

        /* 3D Gold Text Effect */
        .text-3d-gold {
            background: linear-gradient(to bottom, #fcf6ba, #d4af37);
            -webkit-background-clip: text; color: transparent;
            filter: drop-shadow(0 2px 0 #8a6c1e);
        }

        /* Strike Diagonal */
        .strike-diagonal { position: relative; display: inline-block; opacity: 0.6; }
        .strike-diagonal::after { content: ''; position: absolute; top: 50%; left: -5%; width: 110%; height: 1px; background: #e0e0e0; transform: rotate(-10deg); }

        /* Fog Adjustment */
        .fog { position: absolute; inset: 0; background: radial-gradient(circle at center, transparent 40%, #000 100%); pointer-events: none; z-index: 5; }
    </style>
</head>
<body class="font-sans antialiased text-white selection:bg-hb-gold selection:text-black transition-colors duration-1000" id="main-body">

    <!-- Transition Flash -->
    <div id="light-overlay"></div>

    <!-- ============================================= -->
    <!-- SCENE 0: THE STORY (Prologue - Original Cover) -->
    <!-- ============================================= -->
    <div id="scene-story" class="scene active bg-[#050505]">
        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20 animate-pulse-slow"></div>
        <div class="sparkle top-1/4 left-1/4" style="animation-delay: 0s"></div>
        <div class="sparkle top-3/4 right-1/3" style="animation-delay: 1s"></div>
        <div class="sparkle bottom-10 left-1/2" style="animation-delay: 0.5s"></div>

        <div id="book-closed" class="book-container animate-float" onclick="openBook()">
            <div class="book">
                <div class="book-cover">
                    <div class="border-2 border-hb-gold/50 w-[90%] h-[90%] flex flex-col items-center justify-center p-4 text-center">
                        <i class="fas fa-heart text-5xl text-hb-gold mb-6 filter drop-shadow-[0_0_10px_rgba(212,175,55,0.5)]"></i>
                        <h1 class="font-serif text-3xl text-hb-cream mb-2 tracking-widest leading-relaxed">HEART<br>VILLAGE</h1>
                        <p class="font-hand text-xl text-hb-gold/80 mt-2">The Legend of Healing</p>
                    </div>
                </div>
            </div>
            <p class="text-center text-xs text-gray-500 mt-8 tracking-widest animate-pulse">í„°ì¹˜í•˜ì—¬ ì´ì•¼ê¸°ë¥¼ ì‹œì‘í•˜ì„¸ìš”</p>
        </div>

        <div id="story-content" class="hidden w-full max-w-lg px-8 text-center z-10">
            <div class="mb-10 text-hb-gold text-2xl opacity-50"><i class="fas fa-quote-left"></i></div>
            <p id="story-text" class="font-serif text-xl md:text-2xl text-[#fdfbf7] leading-loose min-h-[120px] transition-opacity duration-1000 tracking-wide"></p>
            <div class="mt-12 flex flex-col items-center gap-4 opacity-0 transition duration-1000" id="story-nav">
                <button onclick="nextStoryLine()" class="text-hb-gold text-sm border-b border-hb-gold pb-1 hover:text-white transition tracking-widest uppercase">
                    Next Page <i class="fas fa-chevron-right ml-1 text-xs"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- SCENE 1: THE BLOCK (Problem Awareness)        -->
    <!-- ============================================= -->
    <div id="scene-block" class="scene bg-gradient-to-b from-gray-900 to-black">
        <div class="toxic-river"></div>
        <div class="fog"></div>
        
        <div class="z-20 w-full max-w-md px-6 pt-16 flex flex-col items-center justify-start h-full custom-scroll pb-32">
            <div class="bg-red-900/30 border border-red-600/50 px-4 py-1 rounded-full mb-6 animate-pulse">
                <p class="text-red-400 text-[10px] tracking-[0.2em] font-bold">REALITY CHECK</p>
            </div>
            
            <h1 class="font-serif text-2xl md:text-3xl mb-8 text-center leading-relaxed w-full">
                "í•˜ì§€ë§Œ ì§€ê¸ˆ,<br>
                <span class="text-white font-bold">ê¹€ì˜ìˆ™ ë‹˜ì˜ ì•ì„</span><br>
                <span class="text-red-500 font-bold border-b-2 border-red-500 mt-2 inline-block">4ëŒ€ ì•…ë‹¹</span>ë“¤ì´<br>
                ë§‰ê³  ìˆìŠµë‹ˆë‹¤."
            </h1>
            
            <!-- Villain Grid (ê¹€ì˜ìˆ™ë‹˜ ë§ì¶¤í˜• ë°ì´í„°) -->
            <div class="grid grid-cols-2 gap-4 w-full mb-8">
                <!-- Villain 1: Brain/Stroke -->
                <div class="villain-card animate-float" style="animation-delay: 0s;">
                    <div class="text-3xl mb-2 text-red-500">ğŸ§ </div>
                    <h3 class="font-bold text-sm text-red-400 mb-1">í’(ì¤‘í’)ì˜ ê·¸ë¦¼ì</h3>
                    <p class="text-[10px] text-gray-400">ë‡Œí˜ˆê´€ Uì êº¾ì„<br>ë‡Œë¡œ ê°€ëŠ” ë˜¥ë…</p>
                </div>
                <!-- Villain 2: Gut/Hemorrhoids -->
                <div class="villain-card animate-float" style="animation-delay: 0.3s;">
                    <div class="text-3xl mb-2 text-yellow-500">ğŸ’©</div>
                    <h3 class="font-bold text-sm text-red-400 mb-1">ì¥ ê°€ìŠ¤ & ì¹˜ì§ˆ</h3>
                    <p class="text-[10px] text-gray-400">ì§ì¥/ì½©íŒ¥ ì¶©ì—´<br>ìê¶ë‚´ë§‰ ìœ„í˜‘</p>
                </div>
                <!-- Villain 3: Stomach Aging -->
                <div class="villain-card animate-float" style="animation-delay: 0.6s;">
                    <div class="text-3xl mb-2 text-orange-500">ğŸ”¥</div>
                    <h3 class="font-bold text-sm text-red-400 mb-1">ìœ„ì¥ ë…¸í™”</h3>
                    <p class="text-[10px] text-gray-400">ìœ„ì¶•ì„± ìœ„ì—¼<br>ì—­ë¥˜ì„± ì‹ë„ì—¼</p>
                </div>
                <!-- Villain 4: Bone/Vessels -->
                <div class="villain-card animate-float" style="animation-delay: 0.9s;">
                    <div class="text-3xl mb-2 text-gray-300">ğŸ¦´</div>
                    <h3 class="font-bold text-sm text-red-400 mb-1">ë¬´ë„ˆì§„ ê¸°ë‘¥</h3>
                    <p class="text-[10px] text-gray-400">ê³¨ë°€ë„ ì‹¬ê° ì €í•˜<br>í˜ˆê´€ ì°Œêº¼ê¸° ë§‰í˜</p>
                </div>
            </div>

            <button onclick="openDiagnosis()" class="w-full bg-gray-800/80 border border-gray-600 text-gray-300 py-3 rounded-lg text-xs hover:bg-gray-700 hover:text-white transition flex items-center justify-center gap-2 mb-8">
                <i class="fas fa-search"></i> [ì •ë°€ ë§ì§„ ë°ì´í„°] ìì„¸íˆ ë³´ê¸°
            </button>
        </div>

        <div class="bottom-action">
            <button onclick="nextScene('scene-choice')" class="w-full max-w-md bg-white text-black font-bold py-4 rounded-xl shadow-[0_0_30px_rgba(255,255,255,0.3)] hover:scale-105 transition flex items-center justify-center gap-2 animate-bounce-right">
                ì´ ìƒí™©ì„ í•´ê²°í•˜ë ¤ë©´? <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- SCENE 2: THE CHOICE (Decision)                -->
    <!-- ============================================= -->
    <div id="scene-choice" class="scene bg-black">
        <div class="z-20 w-full max-w-md px-6 pt-16 flex flex-col items-center h-full">
            <div class="bg-gray-800 px-4 py-1 rounded-full mb-8">
                <p class="text-gray-400 text-[10px] tracking-[0.2em]">STAGE 2 : DECISION</p>
            </div>

            <h2 class="font-serif text-2xl mb-10 text-white text-center">ì–´ë–¤ ë¯¸ë˜ë¥¼ ì„ íƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h2>
            
            <div class="w-full space-y-6">
                <!-- Option A: Back -->
                <div class="w-full bg-gray-900 p-6 rounded-2xl border border-gray-800 opacity-50 hover:opacity-100 transition duration-300 text-center cursor-not-allowed">
                    <h3 class="text-gray-400 text-sm mb-2 font-bold">ëŒì•„ê°€ê¸° (Go Back)</h3>
                    <p class="text-xs text-gray-500">ìœ„í—˜í•œ ë‡Œí˜ˆê´€ê³¼ ë§Œë³‘ì˜ ë¿Œë¦¬ì¸<br>ë…ì†Œë¥¼ ì•ˆê³  ì‚´ì•„ê°€ê¸°</p>
                </div>
                
                <!-- VS Badge -->
                <div class="relative h-4 flex items-center justify-center">
                    <div class="absolute bg-black px-4 text-gray-500 font-serif italic text-xl z-10">VS</div>
                    <div class="w-full h-px bg-gray-800"></div>
                </div>

                <!-- Option B: Go (Hero) -->
                <div class="w-full bg-gradient-to-br from-[#132616] to-[#0a0f0d] p-8 rounded-2xl border-2 border-hb-gold shadow-[0_0_40px_rgba(212,175,55,0.2)] cursor-pointer transform hover:scale-105 transition text-center group" onclick="enterHeaven()">
                    <div class="mb-4 text-4xl group-hover:animate-bounce">ğŸ°</div>
                    <h3 class="text-hb-gold text-xl font-bold mb-2 font-serif">í•˜íŠ¸ë¹Œë¦¬ì§€ ì…ì£¼</h3>
                    <p class="text-xs text-gray-300 leading-relaxed mb-6">
                        18ì¼ê°„ì˜ <strong>[ë¥´ë„¤ìƒìŠ¤]</strong> í”„ë¡œì íŠ¸.<br>
                        í˜ˆê´€ì„ ëš«ê³  ê°€ì¥ ê¹¨ë—í•œ ë‚˜ë¡œ ì¬íƒ„ìƒ.
                    </p>
                    <div class="bg-hb-gold text-black px-6 py-3 rounded-full text-sm font-bold shadow-lg inline-block">
                        ì§€ê¸ˆ ì…ì£¼í•˜ê¸°
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- SCENE 3: THE GATE (Lovely Mode Start)         -->
    <!-- ============================================= -->
    <div id="scene-gate" class="scene lovely-bg">
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
            <div class="absolute top-10 left-10 text-4xl opacity-20 animate-float">ğŸ’–</div>
            <div class="absolute bottom-20 right-10 text-3xl opacity-20 animate-float" style="animation-delay: 1s">âœ¨</div>
        </div>

        <div class="z-10 text-center w-full max-w-sm px-6">
            <div class="mb-8 relative">
                <div class="w-24 h-24 mx-auto border-4 border-pink-200 bg-white rounded-full flex items-center justify-center relative z-10 shadow-xl">
                    <span class="text-5xl">ğŸ§šâ€â™€ï¸</span>
                </div>
                <div class="text-center mt-3">
                    <span class="bg-pink-100 text-pink-800 text-[10px] font-bold px-3 py-1 rounded-full shadow-sm">í•˜íŠ¸ ìš”ì •</span>
                </div>
            </div>
            
            <h2 class="font-serif text-2xl text-gray-800 mb-3 font-bold">í™˜ì˜í•©ë‹ˆë‹¤!</h2>
            <p class="text-sm text-gray-500 mb-8 leading-relaxed">
                "ì•„ë¦„ë‹¤ìš´ í•˜íŠ¸ë¹Œë¦¬ì§€ì— ì˜¤ì‹  ê±¸ í™˜ì˜í•´ìš”.<br>
                ì…ì£¼í•˜ì‹¤ <strong>ì—¬ì™•ë‹˜ì˜ ì„±í•¨</strong>ì„ ì•Œë ¤ì£¼ì„¸ìš”!"
            </p>
            
            <input type="text" id="password-input" class="w-full bg-white border-2 border-pink-200 rounded-xl text-center text-xl text-gray-800 py-4 focus:outline-none focus:border-hb-gold placeholder-gray-300 font-serif mb-8 shadow-sm transition" placeholder="ì´ë¦„ ì…ë ¥">
            
            <button onclick="checkPassword()" class="w-full bg-hb-gold text-white py-4 rounded-xl hover:bg-yellow-600 transition uppercase tracking-widest text-sm font-bold shadow-lg transform active:scale-95">
                ì…ì¥í•˜ê¸° (Enter)
            </button>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- SCENE 4: THE PALACE (Welcome Kit)             -->
    <!-- ============================================= -->
    <div id="scene-palace" class="scene hidden lovely-bg justify-start">
        <div class="w-full h-full overflow-y-auto custom-scroll pb-20">
            
            <div class="pt-24 px-6 text-center animate-fade-in relative z-10">
                <div class="inline-block p-4 rounded-full border border-hb-gold/30 mb-6 shadow-md bg-[#1a2e1b]">
                    <span class="text-4xl">ğŸ¤µâ€â™‚ï¸</span>
                </div>
                <p class="text-hb-gold text-xs tracking-[0.4em] uppercase mb-3 font-bold font-eng">Royal Concierge</p>
                <h1 class="font-serif text-3xl md:text-4xl text-gray-800 mb-4 leading-relaxed">
                    ì–´ì„œì˜¤ì„¸ìš”,<br><span class="text-shimmer font-bold text-4xl">ê¹€ì˜ìˆ™ ì—¬ì™•ë‹˜!</span>
                </h1>
                <p class="text-gray-400 text-sm font-light leading-relaxed">
                    ë…ì†Œ ì—†ëŠ” ì„¸ìƒ, <strong>í•˜íŠ¸ë¹Œë¦¬ì§€ í™©ì‹¤</strong>ì…ë‹ˆë‹¤.<br>
                    ì´ê³³ì—ì„œ ê°€ì¥ ì•„ë¦„ë‹µê³  ê±´ê°•í•˜ê²Œ ë‹¤ì‹œ íƒœì–´ë‚˜ì„¸ìš”.
                </p>
            </div>

            <div class="px-6 mt-16 mb-20 perspective-1000">
                <div class="gold-border-card rounded-xl p-10 text-center relative overflow-hidden group max-w-sm mx-auto bg-[#131a15]">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-hb-gold to-transparent"></div>
                    <div class="mb-8 relative">
                        <div class="absolute inset-0 bg-hb-gold/10 blur-xl rounded-full animate-pulse"></div>
                        <i class="fas fa-gift text-7xl text-hb-gold relative z-10 group-hover:scale-110 transition duration-500 drop-shadow-[0_5px_15px_rgba(197,160,89,0.4)]"></i>
                    </div>
                    <h3 class="font-serif text-xl text-hb-gold-light mb-3 font-bold">ë¥´ë„¤ìƒìŠ¤ ì›°ì»´ í‚¤íŠ¸</h3>
                    <p class="text-xs text-gray-400 mb-8 leading-relaxed font-light">
                        ì—¬ì™•ë‹˜ë§Œì„ ìœ„í•œ <strong>18ì¼ê°„ì˜ ë¡œë“œë§µ</strong>ê³¼<br>
                        <strong>VIP ë©¤ë²„ì‹­ ì¹´ë“œ</strong>ê°€ ë‹´ê²¨ìˆìŠµë‹ˆë‹¤.
                    </p>
                    <button onclick="showDetailKit()" class="w-full bg-hb-gold text-hb-dark font-bold py-3.5 rounded-sm shadow-lg hover:bg-white transition transform hover:-translate-y-1 flex justify-center items-center gap-2 uppercase tracking-wider text-xs">
                        <i class="fas fa-box-open"></i> Open Kit
                    </button>
                </div>
            </div>

            <div class="px-8 text-left space-y-4 max-w-sm mx-auto mb-10">
                <h3 class="text-center text-gray-400 font-serif text-sm mb-4 tracking-widest">â€” 18ì¼ê°„ì˜ ì „ì‹  ì„±í˜• ë¡œë“œë§µ â€”</h3>
                <div class="flex items-center gap-4 p-4 bg-white rounded-xl shadow-sm border border-pink-100">
                    <span class="text-2xl">ğŸŒ±</span>
                    <div><span class="text-xs text-pink-500 font-bold block">1íšŒì°¨ (D+6)</span><span class="text-sm text-gray-600">ë…ì†Œ ë°°ì¶œ & í˜ˆê´€ ëš«ê¸°</span></div>
                </div>
                <div class="flex items-center gap-4 p-4 bg-white rounded-xl shadow-sm border border-yellow-100">
                    <span class="text-2xl">âœ¨</span>
                    <div><span class="text-xs text-yellow-600 font-bold block">2íšŒì°¨ (D+12)</span><span class="text-sm text-gray-600">ì¥ ê°€ìŠ¤ ì œê±° & ì—¼ì¦ ì†Œê°</span></div>
                </div>
                <div class="flex items-center gap-4 p-4 bg-white rounded-xl shadow-sm border border-green-100">
                    <span class="text-2xl">ğŸ‘‘</span>
                    <div><span class="text-xs text-green-600 font-bold block">3íšŒì°¨ (D+18)</span><span class="text-sm text-gray-600">ìµœìƒì˜ ì»¨ë””ì…˜ ì™„ì„±</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: DETAILED DIAGNOSIS (ê¹€ì˜ìˆ™ ë‹˜ ë§ì¶¤ ë°ì´í„°) -->
    <div id="modal-diagnosis" class="modal-overlay">
        <div class="w-full max-w-md bg-[#fdfbf7] text-gray-800 rounded-2xl shadow-2xl overflow-hidden m-4 flex flex-col max-h-[85vh]">
            <div class="bg-[#1a2e1b] p-4 text-white flex justify-between items-center">
                <h3 class="font-serif font-bold text-hb-gold"><i class="fas fa-file-medical-alt mr-2"></i>ê¹€ì˜ìˆ™ ë‹˜ ì •ë°€ ë§ì§„í‘œ</h3>
                <button onclick="closeDiagnosis()"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-6 overflow-y-auto custom-scroll text-sm font-light leading-relaxed">
                 <div class="mb-6">
                    <h4 class="font-bold text-red-600 border-b border-red-200 pb-1 mb-2">1. ë‡Œí˜ˆê´€ & ì‹ ê²½ (ê°€ì¥ ìœ„í—˜)</h4>
                    <ul class="list-disc list-inside space-y-1 text-xs text-gray-700">
                        <li><strong>ğŸš¨ ë‡Œí˜ˆê´€ Uì êº¾ì„:</strong> ë‡Œê²½ìƒ‰/í’ì´ ì™”ì„ ê°€ëŠ¥ì„± ë†’ìŒ. (ê´€ë¦¬ê°€ ë§¤ìš° ì‹œê¸‰)</li>
                        <li><strong>ì—°ìˆ˜ ë° ë‡Œë ¥ ì €í•˜:</strong> ì†Œí™”ë¥¼ ë‹´ë‹¹í•˜ëŠ” ë‡Œ ì¤‘ì¶”ê°€ ì•½í•´ì ¸ ì „ë°˜ì ì¸ ë‡Œì˜ ì²´ë ¥ì´ ë–¨ì–´ì§.</li>
                        <li><strong>ê°ì • ë° í˜ˆì•• ì¡°ì ˆ ë¶ˆê°€:</strong> ì˜ì–‘ ë¶€ì¡±ìœ¼ë¡œ ê°ì • ì»¨íŠ¸ë¡¤ ì €í•˜, ë‡Œ(í˜ˆì••ì¡°ì ˆì„¼í„°) ë¬¸ì œë¡œ ì €í˜ˆì•• ë°œìƒ.</li>
                        <li><strong>ì´ëª… ì¦ìƒ:</strong> ë‡Œë¡œ ë…ì†Œê°€ ê³¼ë„í•˜ê²Œ ì˜¬ë¼ê°€ ë°œìƒ.</li>
                    </ul>
                 </div>
                 <div class="mb-6">
                    <h4 class="font-bold text-yellow-600 border-b border-yellow-200 pb-1 mb-2">2. ì¥ & ì†Œí™”ê¸° (ëª¨ë“  ë³‘ì˜ ë¿Œë¦¬)</h4>
                    <ul class="list-disc list-inside space-y-1 text-xs text-gray-700">
                        <li><strong>ğŸ’© ì¥ ë˜¥ê°€ìŠ¤ ì£¼ë¨¸ë‹ˆ:</strong> ì¥ì˜ ë…ì†Œì™€ ê³µê¸°ê°€ ì°¨ì„œ ë‡Œê¹Œì§€ ë˜¥ë…ì´ ì˜¬ë¼ê°€ëŠ” ì¤‘.</li>
                        <li><strong>ìœ„ì¥ ë…¸í™” (ìœ„ì¶•ì„± ìœ„ì—¼):</strong> ìœ„ê°€ ì‹¬í•˜ê²Œ ë¶“ê³  ëŠ™ì–´ë²„ë ¸ìœ¼ë©° ì—­ë¥˜ì„± ì‹ë„ì—¼ê¹Œì§€ ë°œìƒ.</li>
                        <li><strong>ì§ì¥ ì¶©í˜ˆ (ì¹˜ì§ˆ):</strong> ì¹˜ì§ˆì€ ë‹¨ìˆœ ì™¸ê³¼ ë¬¸ì œê°€ ì•„ë‹˜. ì—¬ê¸°ì„œ ë°œìƒí•œ ë…ì†Œê°€ ìê¶ê³¼ ë°©ê´‘ê¹Œì§€ í¼ì ¸ ìê¶ë‚´ë§‰ì„ ìœ„í˜‘ ì¤‘.</li>
                    </ul>
                 </div>
                 <div class="mb-6">
                    <h4 class="font-bold text-gray-600 border-b border-gray-300 pb-1 mb-2">3. ìˆœí™˜ & ë¼ˆ (ë¬´ë„ˆì§„ ê¸°ë‘¥)</h4>
                    <ul class="list-disc list-inside space-y-1 text-xs text-gray-700">
                        <li><strong>ë¼ˆ/ê´€ì ˆ:</strong> ê³¨ë°€ë„ê°€ ë‚®ê³  ì¹¼ìŠ˜ì´ ë¶€ì¡±í•´ ë‹¤ë¦¬ì™€ ë¬´ë¦ì´ ì‹¬ê°í•˜ê²Œ ì•½í•´ì§.</li>
                        <li><strong>ê·¼ìœ¡ ê²½ì§:</strong> ê³¼ê±° ëª© ìˆ˜ìˆ  ì—¬íŒŒë¡œ ë’·ëª©ê³¼ ì–´ê¹¨ê°€ ì‹¬í•˜ê²Œ êµ³ì–´ ë‡Œë¡œ ê°€ëŠ” í˜ˆë¥˜ë¥¼ ë°©í•´í•¨.</li>
                        <li><strong>í˜ˆê´€ ì˜¤ì—¼:</strong> í˜ˆê´€ì´ ê¸°ë¦„ê¸°ë¡œ ê½‰ ë§‰í˜€ê°€ê³  ìˆìŒ (ì‹¬ì¥ ì••ë°•). ì·Œì¥/ì¢Œê³¨ì‹ ê²½í†µ ìœ„í—˜.</li>
                    </ul>
                 </div>
                 <div class="mb-6">
                    <h4 class="font-bold text-green-700 border-b border-green-200 pb-1 mb-2">4. ê°„ & í•´ë… (í•„í„° ê³ ì¥)</h4>
                    <ul class="list-disc list-inside space-y-1 text-xs text-gray-700">
                        <li><strong>ê°„ ì¶©í˜ˆ & ì§€ë°©ê°„:</strong> í•´ë… ê³µì¥ì¸ ê°„ì— ê°ˆìƒ‰ ì (ì§€ë°©ê°„)ì´ ë³´ì´ë©° ì‹¬í•˜ê²Œ ë¶€ì–´ìˆìŒ (í›„ë¶€ê°„ë²½).</li>
                        <li><strong>í”¼ë¶€ ë°‘ ë…ì†Œ:</strong> í”¼ë¶€ë¡œ ë¹ ì ¸ë‚˜ê°€ì§€ ëª»í•œ ë…ì†Œë“¤ì´ í”¼ë¶€ ë°‘ì— ê°€ë“ ìŒ“ì—¬ ìˆìŒ.</li>
                        <li><strong>í/ê¸°ê´€ì§€:</strong> í ì¡°ì§ê³¼ ê¸°ê´€ì§€, ì„±ëŒ€, ì½”(ë¹„ì—¼)ê¹Œì§€ ì „ë°˜ì ìœ¼ë¡œ ì•½í•´ì§„ ìƒíƒœ.</li>
                    </ul>
                 </div>
            </div>
            <div class="p-4 bg-gray-100 text-center border-t border-gray-300">
                <button onclick="closeDiagnosis()" class="text-xs text-gray-500 underline font-bold tracking-widest uppercase">ë³´ê³ ì„œ ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- DETAIL KIT MODAL -->
    <div id="modal-kit" class="fixed inset-0 z-50 bg-black/90 hidden flex flex-col overflow-y-auto">
        <button onclick="closeDetailKit()" class="fixed top-6 right-6 text-white/50 hover:text-white z-50"><i class="fas fa-times text-2xl"></i></button>
        <div class="w-full max-w-md mx-auto bg-[#0a0f0d] p-6 pt-16 text-center relative border-x border-hb-gold/10 min-h-screen">
             <!-- Border Frame -->
             <div class="border-4 double border-hb-gold p-8 relative bg-[#131a15]">
                <i class="fas fa-crown text-4xl text-hb-gold mb-6 block drop-shadow-md"></i>
                <h2 class="text-2xl text-white font-serif mb-2 font-bold tracking-widest">RENAISSANCE VIP</h2>
                <div class="w-12 h-px bg-hb-gold mx-auto mb-8 opacity-50"></div>
                
                <p class="text-xl text-hb-gold-light font-serif mb-1">ê¹€ì˜ìˆ™ ë‹˜</p>
                <p class="text-gray-500 text-[10px] mb-10 tracking-[0.2em] font-eng">ID: HV-2026-VIP</p>
                
                <!-- Fixed Letter Area -->
                <div class="text-left bg-black/20 p-6 shadow-inner mb-10 rounded border border-white/5">
                    <h3 class="text-hb-gold font-bold border-b border-gray-700 pb-2 mb-4 text-xs tracking-widest uppercase">ğŸ’Œ Chief's Letter</h3>
                    <p class="text-sm text-gray-300 leading-relaxed mb-4 font-serif italic">
                        "ê¹€ì˜ìˆ™ ë‹˜, ì›ì¥ë‹˜ì˜ ì •ë°€ ë¶„ì„ ê²°ê³¼ë¥¼ ë³´ì…¨ì§€ìš”? ê²‰ìœ¼ë¡œëŠ” ì°¸ì•„ì˜¤ì…¨ì§€ë§Œ, ëª¸ì†ì€ ë‡Œí˜ˆê´€ë¶€í„° ì¥ê¹Œì§€ ì´ë¯¸ 40ë…„ ë¬µì€ ì „ìŸí„°ì˜€ìŠµë‹ˆë‹¤."
                    </p>
                    <p class="text-sm text-gray-300 leading-relaxed font-serif italic">
                        "í•˜ì§€ë§Œ ë‹¤í–‰ì…ë‹ˆë‹¤. ì§€ê¸ˆì´ë¼ë„ ì›ì¸ì„ ì°¾ì•˜ìœ¼ë‹ˆê¹Œìš”. ì œê°€ ì˜ìˆ™ ë‹˜ì˜ ê±´ê°• ë¹„ì„œê°€ ë˜ì–´, ê½‰ ë§‰íŒ ë…ì†Œë“¤ì„ ëš«ì–´ë‚´ê³  ì „ì‹ ì„ ì™„ë²½í•˜ê²Œ ì¬ê±´ì¶• í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì €ë§Œ ë¯¿ê³  ë”°ë¼ì˜¤ì„¸ìš”."
                    </p>
                </div>
                
                <p class="font-hand text-3xl text-gray-500 opacity-50">- Heart Village Chief -</p>
                
                <button onclick="alert('ğŸ“¸ ì°°ì¹µ! ë©¤ë²„ì‹­ ì¹´ë“œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.')" class="mt-12 w-full bg-hb-gold text-hb-dark font-bold py-4 rounded-sm hover:bg-white transition shadow-lg uppercase tracking-widest text-xs">
                    Save Membership Card
                </button>
             </div>
        </div>
    </div>

    <script>
        const storyLines = [
            "ì˜›ë‚  ì•„ì£¼ ë¨¼ ì˜›ë‚ ,<br>ìš°ë¦¬ì˜ ëª¸ì€ ë”°ëœ»í•˜ê³ <br>ìˆœìˆ˜í•œ ìì—° ê·¸ ìì²´ì˜€ìŠµë‹ˆë‹¤.",
            "í•˜ì§€ë§Œ ì‹œê°„ì´ íë¥´ë©°<br>ì°¨ê°€ìš´ ëƒ‰ê¸°ì™€ ë…ì†Œê°€ ìŒ“ì—¬<br>ìŠ¤ìŠ¤ë¡œ ì¹˜ìœ í•˜ëŠ” í˜ì„ ìƒì–´ê°”ì£ .",
            "ì—¬ê¸°, ìƒì–´ë²„ë¦° ìƒëª…ë ¥ì„<br>ë˜ì°¾ì•„ì£¼ëŠ” ì‹ ë¹„ë¡œìš´<br>ì¹˜ìœ ì˜ ë§ˆì„ì´ ìˆìŠµë‹ˆë‹¤.",
            "ë¹„ì›€ìœ¼ë¡œ ë…ì„ ì”»ì–´ë‚´ê³ ,<br>ì±„ì›€ìœ¼ë¡œ ì˜¨ê¸°ë¥¼ ë¶ˆì–´ë„£ëŠ” ê³³.<br>ë°”ë¡œ <strong class='text-hb-gold'>í•˜íŠ¸ë¹Œë¦¬ì§€</strong>ì…ë‹ˆë‹¤.",
            "ì§€ê¸ˆë¶€í„° ë‹¹ì‹ ì„<br>ê·¸ íŠ¹ë³„í•œ ì—¬ì •ìœ¼ë¡œ ì´ˆëŒ€í•©ë‹ˆë‹¤."
        ];
        let storyIndex = 0;

        function openBook() {
            document.getElementById('book-closed').style.display = 'none';
            document.getElementById('story-content').classList.remove('hidden');
            typeWriterStory();
        }

        function typeWriterStory() {
            const textEl = document.getElementById('story-text');
            const navEl = document.getElementById('story-nav');
            
            textEl.style.opacity = 0;
            navEl.style.opacity = 0;

            setTimeout(() => {
                textEl.innerHTML = storyLines[storyIndex];
                textEl.style.opacity = 1;
                setTimeout(() => { navEl.style.opacity = 1; }, 1000);
            }, 500);
        }

        function nextStoryLine() {
            storyIndex++;
            if (storyIndex < storyLines.length) {
                typeWriterStory();
            } else {
                nextScene('scene-block');
            }
        }

        function nextScene(id) {
            document.querySelectorAll('.scene').forEach(el => {
                el.style.opacity = '0';
                setTimeout(() => el.classList.remove('active'), 500);
            });
            setTimeout(() => {
                const target = document.getElementById(id);
                target.classList.add('active');
                setTimeout(() => target.style.opacity = '1', 50);
            }, 500);
        }

        function enterHeaven() {
            const overlay = document.getElementById('light-overlay');
            overlay.style.opacity = '1';
            setTimeout(() => {
                document.getElementById('main-body').style.backgroundColor = '#fdfbf7';
                nextScene('scene-gate');
                overlay.style.opacity = '0';
            }, 1000);
        }

        function checkPassword() {
            const input = document.getElementById('password-input').value;
            // !!! ê¹€ì˜ìˆ™ë‹˜ ì´ë¦„ìœ¼ë¡œ í™•ì¸ !!!
            if (input.includes('ê¹€ì˜ìˆ™') || input.includes('ì˜ìˆ™')) { 
                var duration = 3 * 1000;
                var animationEnd = Date.now() + duration;
                var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
                var colors = ['#d4af37', '#ffe4e1', '#ffffff'];
                var interval = setInterval(function() {
                    var timeLeft = animationEnd - Date.now();
                    if (timeLeft <= 0) { return clearInterval(interval); }
                    var particleCount = 50 * (timeLeft / duration);
                    confetti(Object.assign({}, defaults, { particleCount, colors: colors, origin: { x: Math.random(), y: Math.random() - 0.2 } }));
                }, 250);
                nextScene('scene-palace');
            } else {
                alert("ì•”í˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (íŒíŠ¸: ì—¬ì™•ë‹˜ ì„±í•¨)");
            }
        }

        function openDiagnosis() { document.getElementById('modal-diagnosis').classList.add('open'); }
        function closeDiagnosis() { document.getElementById('modal-diagnosis').classList.remove('open'); }
        function showDetailKit() { document.getElementById('modal-kit').classList.remove('hidden'); }
        function closeDetailKit() { document.getElementById('modal-kit').classList.add('hidden'); }

        window.onload = function() {
            document.getElementById('scene-story').classList.add('active');
            setTimeout(() => document.getElementById('scene-story').style.opacity = '1', 100);
        };
    </script>
</body>
</html>
